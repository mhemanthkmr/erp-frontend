import{al as P,aA as _,an as O,a as p,am as e}from"./index-NNRCG9Rm.js";import{c as S}from"./actions-l-YzO_Wk.js";import{u as L,C as ee}from"./index-vCtOLfRs.js";import{a9 as G,V as K,ad as V,O as H,U as $,ai as ae,C as le,a8 as J,a6 as Y,ab as k,aE as ne,aF as oe,a3 as te,a4 as ie,X as ce}from"./IdurarOs-hOF3usfi.js";import{d as N,P as se}from"./index-nierwHcH.js";import{a as q}from"./helpers-rPTOY0Yj.js";import{M as re}from"./index-ESSCVN9R.js";import{a as Q,u as ue}from"./useDate-Fz8rfIL3.js";import{u as de}from"./useDebounce--08Pdi1N.js";import{s as W}from"./index-xrkCjAY0.js";import{c as be}from"./color-tz1ocuTw.js";import{S as ve}from"./index-CB1vN1Z7.js";import{T as D}from"./index-ntKD6FMB.js";import{D as pe}from"./DeleteOutlined-XARtgMJL.js";import{g as me,D as xe,E as he,j as fe}from"./ErpApp-og-vdlRX.js";import{T as Se}from"./Table-yESaXSHN.js";function Ce(){return me()}const ge={useBreakpoint:Ce},R=t=>t.crud,je=P([R],t=>t.current),Be=P([R],t=>t.list),Te=P([R],t=>t.create),Ie=P([R],t=>t.update);P([R],t=>t.read);const Ae=P([R],t=>t.delete),Me=P([R],t=>t.search);function oa({config:t,formElements:n,withUpload:u=!1}){let{entity:c}=t;const d=_(),{isLoading:l,isSuccess:a}=O(Te),{crudContextAction:s}=L(),{panel:x,collapsedBox:g,readBox:j}=s,[v]=G.useForm(),o=K(),i=b=>{b.file&&u&&(b.file=b.file[0].originFileObj);const B=Object.keys(b).reduce((C,m)=>(C[m]=typeof b[m]=="string"?b[m].trim():b[m],C),{});d(S.create({entity:c,jsonData:B,withUpload:u}))};return p.useEffect(()=>{a&&(j.open(),g.open(),x.open(),v.resetFields(),d(S.resetAction({actionType:"create"})),d(S.list({entity:c})))},[a]),e.jsx(V,{isLoading:l,children:e.jsxs(G,{form:v,layout:"vertical",onFinish:i,children:[n,e.jsx(G.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",children:o("Submit")})})]})})}function ta({config:t,formElements:n,withUpload:u=!1}){let{entity:c}=t;const d=K(),l=_(),{current:a,isLoading:s,isSuccess:x}=O(Ie),{state:g,crudContextAction:j}=L(),{panel:v,collapsedBox:o,readBox:i}=j,b=()=>{i.open()},[B]=G.useForm(),C=r=>{const E=a._id;r.file&&u&&(r.file=r.file[0].originFileObj);const T=Object.keys(r).reduce((A,M)=>(A[M]=typeof r[M]=="string"?r[M].trim():r[M],A),{});l(S.update({entity:c,id:E,jsonData:T,withUpload:u}))};p.useEffect(()=>{if(a){let r={...a};r.birthday&&(r={...r,birthday:N(r.birthday).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),r.date&&(r={...r,date:N(r.date).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),r.expiredDate&&(r={...r,expiredDate:N(r.expiredDate).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),r.created&&(r={...r,created:N(r.created).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),r.updated&&(r={...r,updated:N(r.updated).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),B.resetFields(),B.setFieldsValue(r)}},[a]),p.useEffect(()=>{x&&(i.open(),o.open(),v.open(),B.resetFields(),l(S.resetAction({actionType:"update"})),l(S.list({entity:c})))},[x]);const{isEditBoxOpen:m}=g,I=m?{display:"block",opacity:1}:{display:"none",opacity:0};return e.jsx("div",{style:I,children:e.jsx(V,{isLoading:s,children:e.jsxs(G,{form:B,layout:"vertical",onFinish:C,children:[n,e.jsx(G.Item,{style:{display:"inline-block",paddingRight:"5px"},children:e.jsx(H,{type:"primary",htmlType:"submit",children:d("Save")})}),e.jsx(G.Item,{style:{display:"inline-block",paddingLeft:"5px"},children:e.jsx(H,{onClick:b,children:d("Cancel")})})]})})})}function ia({config:t}){const n=K();let{entity:u,deleteModalLabels:c,deleteMessage:d=n("are_you_sure_you_want_to_delete"),modalTitle:l=n("delete_confirmation")}=t;const a=_(),{current:s,isLoading:x,isSuccess:g}=O(Ae),{state:j,crudContextAction:v}=L(),{appContextAction:o}=$(),{panel:i,readBox:b}=v,{navMenu:B}=o,{isModalOpen:C}=j,{modal:m}=v,[I,r]=p.useState("");p.useEffect(()=>{if(g&&(m.close(),a(S.list({entity:u}))),s){let A=c.map(M=>q(s,M)).join(" ");r(A)}},[g,s]);const E=()=>{const A=s._id;a(S.delete({entity:u,id:A})),b.close(),m.close(),i.close(),B.collapse(),a(S.list({entity:u}))},T=()=>{x||m.close()};return e.jsx(re,{title:l,open:C,onOk:E,onCancel:T,confirmLoading:x,children:e.jsxs("p",{children:[d,I]})})}const ye=[{icon:"ðŸ‡¦ðŸ‡«",label:"Afghanistan",value:"AF"},{icon:"ðŸ‡¦ðŸ‡±",label:"Albania",value:"AL"},{icon:"ðŸ‡©ðŸ‡¿",label:"Algeria",value:"DZ"},{icon:"ðŸ‡¦ðŸ‡©",label:"Andorra",value:"AD"},{icon:"ðŸ‡¦ðŸ‡´",label:"Angola",value:"AO"},{icon:"ðŸ‡¦ðŸ‡®",label:"Anguilla",value:"AI"},{icon:"ðŸ‡¦ðŸ‡·",label:"Argentina",value:"AR"},{icon:"ðŸ‡¦ðŸ‡²",label:"Armenia",value:"AM"},{icon:"ðŸ‡¦ðŸ‡¼",label:"Aruba",value:"AW"},{icon:"ðŸ‡¦ðŸ‡º",label:"Australia",value:"AU"},{icon:"ðŸ‡¦ðŸ‡¹",label:"Austria",value:"AT"},{icon:"ðŸ‡¦ðŸ‡¿",label:"Azerbaijan",value:"AZ"},{icon:"ðŸ‡§ðŸ‡¸",label:"Bahamas",value:"BS"},{icon:"ðŸ‡§ðŸ‡­",label:"Bahrain",value:"BH"},{icon:"ðŸ‡§ðŸ‡©",label:"Bangladesh",value:"BD"},{icon:"ðŸ‡§ðŸ‡§",label:"Barbados",value:"BB"},{icon:"ðŸ‡§ðŸ‡¾",label:"Belarus",value:"BY"},{icon:"ðŸ‡§ðŸ‡ª",label:"Belgium",value:"BE"},{icon:"ðŸ‡§ðŸ‡¿",label:"Belize",value:"BZ"},{icon:"ðŸ‡§ðŸ‡¯",label:"Benin",value:"BJ"},{icon:"ðŸ‡§ðŸ‡²",label:"Bermuda",value:"BM"},{icon:"ðŸ‡§ðŸ‡¹",label:"Bhutan",value:"BT"},{icon:"ðŸ‡§ðŸ‡´",label:"Bolivia",value:"BO"},{icon:"ðŸ‡§ðŸ‡¦",label:"Bosnia and Herzegovina",value:"BA"},{icon:"ðŸ‡§ðŸ‡¼",label:"Botswana",value:"BW"},{icon:"ðŸ‡§ðŸ‡·",label:"Brazil",value:"BR"},{icon:"ðŸ‡§ðŸ‡³",label:"Brunei Darussalam",value:"BN"},{icon:"ðŸ‡§ðŸ‡¬",label:"Bulgaria",value:"BG"},{icon:"ðŸ‡§ðŸ‡«",label:"Burkina Faso",value:"BF"},{icon:"ðŸ‡§ðŸ‡®",label:"Burundi",value:"BI"},{icon:"ðŸ‡¨ðŸ‡»",label:"Cabo Verde",value:"CV"},{icon:"ðŸ‡°ðŸ‡­",label:"Cambodia",value:"KH"},{icon:"ðŸ‡¨ðŸ‡²",label:"Cameroon",value:"CM"},{icon:"ðŸ‡¨ðŸ‡¦",label:"Canada",value:"CA"},{icon:"ðŸ‡¨ðŸ‡«",label:"Central African Republic",value:"CF"},{icon:"ðŸ‡¹ðŸ‡©",label:"Chad",value:"TD"},{icon:"ðŸ‡¨ðŸ‡±",label:"Chile",value:"CL"},{icon:"ðŸ‡¨ðŸ‡³",label:"China",value:"CN"},{icon:"ðŸ‡¨ðŸ‡´",label:"Colombia",value:"CO"},{icon:"ðŸ‡°ðŸ‡²",label:"Comoros",value:"KM"},{icon:"ðŸ‡¨ðŸ‡©",label:"Congo",value:"CD"},{icon:"ðŸ‡¨ðŸ‡¬",label:"Congo",value:"CG"},{icon:"ðŸ‡¨ðŸ‡·",label:"Costa Rica",value:"CR"},{icon:"ðŸ‡­ðŸ‡·",label:"Croatia",value:"HR"},{icon:"ðŸ‡¨ðŸ‡º",label:"Cuba",value:"CU"},{icon:"ðŸ‡¨ðŸ‡¾",label:"Cyprus",value:"CY"},{icon:"ðŸ‡¨ðŸ‡¿",label:"Czechia",value:"CZ"},{icon:"ðŸ‡¨ðŸ‡®",label:"Cote d Ivoire",value:"CI"},{icon:"ðŸ‡©ðŸ‡°",label:"Denmark",value:"DK"},{icon:"ðŸ‡©ðŸ‡¯",label:"Djibouti",value:"DJ"},{icon:"ðŸ‡©ðŸ‡²",label:"Dominica",value:"DM"},{icon:"ðŸ‡©ðŸ‡´",label:"Dominican Republic",value:"DO"},{icon:"ðŸ‡ªðŸ‡¨",label:"Ecuador",value:"EC"},{icon:"ðŸ‡ªðŸ‡¬",label:"Egypt",value:"EG"},{icon:"ðŸ‡¸ðŸ‡»",label:"El Salvador",value:"SV"},{icon:"ðŸ‡ªðŸ‡·",label:"Eritrea",value:"ER"},{icon:"ðŸ‡ªðŸ‡ª",label:"Estonia",value:"EE"},{icon:"ðŸ‡¸ðŸ‡¿",label:"Eswatini",value:"SZ"},{icon:"ðŸ‡ªðŸ‡¹",label:"Ethiopia",value:"ET"},{icon:"ðŸ‡«ðŸ‡¯",label:"Fiji",value:"FJ"},{icon:"ðŸ‡«ðŸ‡®",label:"Finland",value:"FI"},{icon:"ðŸ‡«ðŸ‡·",label:"France",value:"FR"},{icon:"ðŸ‡¬ðŸ‡¦",label:"Gabon",value:"GA"},{icon:"ðŸ‡¬ðŸ‡²",label:"Gambia",value:"GM"},{icon:"ðŸ‡¬ðŸ‡ª",label:"Georgia",value:"GE"},{icon:"ðŸ‡©ðŸ‡ª",label:"Germany",value:"DE"},{icon:"ðŸ‡¬ðŸ‡­",label:"Ghana",value:"GH"},{icon:"ðŸ‡¬ðŸ‡®",label:"Gibraltar",value:"GI"},{icon:"ðŸ‡¬ðŸ‡·",label:"Greece",value:"GR"},{icon:"ðŸ‡¬ðŸ‡±",label:"Greenland",value:"GL"},{icon:"ðŸ‡¬ðŸ‡µ",label:"Guadeloupe",value:"GP"},{icon:"ðŸ‡¬ðŸ‡º",label:"Guam",value:"GU"},{icon:"ðŸ‡¬ðŸ‡¹",label:"Guatemala",value:"GT"},{icon:"ðŸ‡¬ðŸ‡¬",label:"Guernsey",value:"GG"},{icon:"ðŸ‡¬ðŸ‡³",label:"Guinea",value:"GN"},{icon:"ðŸ‡¬ðŸ‡¼",label:"Guinea-Bissau",value:"GW"},{icon:"ðŸ‡¬ðŸ‡¾",label:"Guyana",value:"GY"},{icon:"ðŸ‡­ðŸ‡¹",label:"Haiti",value:"HT"},{icon:"ðŸ‡­ðŸ‡³",label:"Honduras",value:"HN"},{icon:"ðŸ‡­ðŸ‡°",label:"Hong Kong",value:"HK"},{icon:"ðŸ‡­ðŸ‡º",label:"Hungary",value:"HU"},{icon:"ðŸ‡®ðŸ‡¸",label:"Iceland",value:"IS"},{icon:"ðŸ‡®ðŸ‡³",value:"IN",label:"India"},{icon:"ðŸ‡®ðŸ‡©",value:"ID",label:"Indonesia"},{icon:"ðŸ‡®ðŸ‡·",value:"IR",label:"Iran"},{icon:"ðŸ‡®ðŸ‡¶",value:"IQ",label:"Iraq"},{icon:"ðŸ‡®ðŸ‡ª",value:"IE",label:"Ireland"},{icon:"ðŸ‡®ðŸ‡±",value:"IL",label:"Israel"},{icon:"ðŸ‡®ðŸ‡¹",value:"IT",label:"Italy"},{icon:"ðŸ‡¯ðŸ‡²",value:"JM",label:"Jamaica"},{icon:"ðŸ‡¯ðŸ‡µ",value:"JP",label:"Japan"},{icon:"ðŸ‡¯ðŸ‡´",value:"JO",label:"Jordan"},{icon:"ðŸ‡°ðŸ‡¿",value:"KZ",label:"Kazakhstan"},{icon:"ðŸ‡°ðŸ‡ª",value:"KE",label:"Kenya"},{icon:"ðŸ‡°ðŸ‡µ",value:"KP",label:"Korea"},{icon:"ðŸ‡°ðŸ‡·",value:"KR",label:"Korea"},{icon:"ðŸ‡°ðŸ‡¼",value:"KW",label:"Kuwait"},{icon:"ðŸ‡°ðŸ‡¬",value:"KG",label:"Kyrgyzstan"},{icon:"ðŸ‡±ðŸ‡»",value:"LV",label:"Latvia"},{icon:"ðŸ‡±ðŸ‡§",value:"LB",label:"Lebanon"},{icon:"ðŸ‡±ðŸ‡¸",value:"LS",label:"Lesotho"},{icon:"ðŸ‡±ðŸ‡·",value:"LR",label:"Liberia"},{icon:"ðŸ‡±ðŸ‡¾",value:"LY",label:"Libya"},{icon:"ðŸ‡±ðŸ‡®",value:"LI",label:"Liechtenstein"},{icon:"ðŸ‡±ðŸ‡¹",value:"LT",label:"Lithuania"},{icon:"ðŸ‡±ðŸ‡º",value:"LU",label:"Luxembourg"},{icon:"ðŸ‡²ðŸ‡¬",value:"MG",label:"Madagascar"},{icon:"ðŸ‡²ðŸ‡¼",value:"MW",label:"Malawi"},{icon:"ðŸ‡²ðŸ‡¾",value:"MY",label:"Malaysia"},{icon:"ðŸ‡²ðŸ‡»",value:"MV",label:"Maldives"},{icon:"ðŸ‡²ðŸ‡±",value:"ML",label:"Mali"},{icon:"ðŸ‡²ðŸ‡¹",value:"MT",label:"Malta"},{icon:"ðŸ‡²ðŸ‡¶",value:"MQ",label:"Martinique"},{icon:"ðŸ‡²ðŸ‡·",value:"MR",label:"Mauritania"},{icon:"ðŸ‡²ðŸ‡º",value:"MU",label:"Mauritius"},{icon:"ðŸ‡²ðŸ‡½",value:"MX",label:"Mexico"},{icon:"ðŸ‡²ðŸ‡©",value:"MD",label:"Moldova"},{icon:"ðŸ‡²ðŸ‡¨",value:"MC",label:"Monaco"},{icon:"ðŸ‡²ðŸ‡³",value:"MN",label:"Mongolia"},{icon:"ðŸ‡²ðŸ‡ª",value:"ME",label:"Montenegro"},{icon:"ðŸ‡²ðŸ‡¸",value:"MS",label:"Montserrat"},{icon:"ðŸ‡²ðŸ‡¦",value:"MA",label:"Morocco"},{icon:"ðŸ‡²ðŸ‡¿",value:"MZ",label:"Mozambique"},{icon:"ðŸ‡²ðŸ‡²",value:"MM",label:"Myanmar"},{icon:"ðŸ‡³ðŸ‡¦",value:"NA",label:"Namibia"},{icon:"ðŸ‡³ðŸ‡µ",value:"NP",label:"Nepal"},{icon:"ðŸ‡³ðŸ‡±",value:"NL",label:"Netherlands"},{icon:"ðŸ‡³ðŸ‡¨",value:"NC",label:"New Caledonia"},{icon:"ðŸ‡³ðŸ‡¿",value:"NZ",label:"New Zealand"},{icon:"ðŸ‡³ðŸ‡®",value:"NI",label:"Nicaragua"},{icon:"ðŸ‡³ðŸ‡ª",value:"NE",label:"Niger"},{icon:"ðŸ‡³ðŸ‡¬",value:"NG",label:"Nigeria"},{icon:"ðŸ‡³ðŸ‡´",value:"NO",label:"Norway"},{icon:"ðŸ‡´ðŸ‡²",value:"OM",label:"Oman"},{icon:"ðŸ‡µðŸ‡°",value:"PK",label:"Pakistan"},{icon:"ðŸ‡µðŸ‡¸",value:"PS",label:"Palestine"},{icon:"ðŸ‡µðŸ‡¦",value:"PA",label:"Panama"},{icon:"ðŸ‡µðŸ‡¬",value:"PG",label:"Papua New Guinea"},{icon:"ðŸ‡µðŸ‡¾",value:"PY",label:"Paraguay"},{icon:"ðŸ‡µðŸ‡ª",value:"PE",label:"Peru"},{icon:"ðŸ‡µðŸ‡­",value:"PH",label:"Philippines"},{icon:"ðŸ‡µðŸ‡±",value:"PL",label:"Poland"},{icon:"ðŸ‡µðŸ‡¹",value:"PT",label:"Portugal"},{icon:"ðŸ‡µðŸ‡·",value:"PR",label:"Puerto Rico"},{icon:"ðŸ‡¶ðŸ‡¦",value:"QA",label:"Qatar"},{icon:"ðŸ‡²ðŸ‡°",value:"MK",label:"Macedonia"},{icon:"ðŸ‡·ðŸ‡´",value:"RO",label:"Romania"},{icon:"ðŸ‡·ðŸ‡º",value:"RU",label:"Russia"},{icon:"ðŸ‡·ðŸ‡¼",value:"RW",label:"Rwanda"},{icon:"ðŸ‡·ðŸ‡ª",value:"RE",label:"RÃ©union"},{icon:"ðŸ‡¸ðŸ‡¦",value:"SA",label:"Saudi Arabia"},{icon:"ðŸ‡¸ðŸ‡³",value:"SN",label:"Senegal"},{icon:"ðŸ‡·ðŸ‡¸",value:"RS",label:"Serbia"},{icon:"ðŸ‡¸ðŸ‡¬",value:"SG",label:"Singapore"},{icon:"ðŸ‡¸ðŸ‡°",value:"SK",label:"Slovakia"},{icon:"ðŸ‡¸ðŸ‡®",value:"SI",label:"Slovenia"},{icon:"ðŸ‡¸ðŸ‡´",value:"SO",label:"Somalia"},{icon:"ðŸ‡¿ðŸ‡¦",value:"ZA",label:"South Africa"},{icon:"ðŸ‡¸ðŸ‡¸",value:"SS",label:"South Sudan"},{icon:"ðŸ‡ªðŸ‡¸",value:"ES",label:"Spain"},{icon:"ðŸ‡±ðŸ‡°",value:"LK",label:"Sri Lanka"},{icon:"ðŸ‡¸ðŸ‡©",value:"SD",label:"Sudan"},{icon:"ðŸ‡¸ðŸ‡·",value:"SR",label:"Suriname"},{icon:"ðŸ‡¸ðŸ‡ª",value:"SE",label:"Sweden"},{icon:"ðŸ‡¨ðŸ‡­",value:"CH",label:"Switzerland"},{icon:"ðŸ‡¸ðŸ‡¾",value:"SY",label:"Syria"},{icon:"ðŸ‡¹ðŸ‡¼",value:"TW",label:"Taiwan"},{icon:"ðŸ‡¹ðŸ‡¯",value:"TJ",label:"Tajikistan"},{icon:"ðŸ‡¹ðŸ‡¿",value:"TZ",label:"Tanzania"},{icon:"ðŸ‡¹ðŸ‡­",value:"TH",label:"Thailand"},{icon:"ðŸ‡¹ðŸ‡±",value:"TL",label:"Timor-Leste"},{icon:"ðŸ‡¹ðŸ‡¬",value:"TG",label:"Togo"},{icon:"ðŸ‡¹ðŸ‡´",value:"TO",label:"Tonga"},{icon:"ðŸ‡¹ðŸ‡³",value:"TN",label:"Tunisia"},{icon:"ðŸ‡¹ðŸ‡·",value:"TR",label:"Turkey"},{value:"TM",label:"Turkmenistan",icon:"ðŸ‡¹ðŸ‡²"},{value:"UG",label:"Uganda",icon:"ðŸ‡ºðŸ‡¬"},{value:"UA",label:"Ukraine",icon:"ðŸ‡ºðŸ‡¦"},{value:"AE",label:"United Arab Emirates",icon:"ðŸ‡¦ðŸ‡ª"},{value:"GB",label:"United Kingdom",icon:"ðŸ‡¬ðŸ‡§"},{value:"US",label:"United States",icon:"ðŸ‡ºðŸ‡¸"},{value:"UY",label:"Uruguay",icon:"ðŸ‡ºðŸ‡¾"},{value:"UZ",label:"Uzbekistan",icon:"ðŸ‡ºðŸ‡¿"},{value:"VE",label:"Venezuela",icon:"ðŸ‡»ðŸ‡ª"},{value:"VN",label:"Vietnam",icon:"ðŸ‡»ðŸ‡³"},{value:"YE",label:"Yemen",icon:"ðŸ‡¾ðŸ‡ª"},{value:"ZM",label:"Zambia",icon:"ðŸ‡¿ðŸ‡²"},{value:"ZW",label:"Zimbabwe",icon:"ðŸ‡¿ðŸ‡¼"}],De=({fields:t,translate:n})=>{let u=[];return Object.keys(t).forEach(c=>{let d=t[c];u.push({title:d.label?d.label:c,dataIndex:d.dataIndex?d.dataIndex.join("."):c,isDate:d.type==="date"})}),u};function Ee({fields:t,translate:n,moneyFormatter:u,dateFormat:c}){let d=[];return Object.keys(t).forEach(l=>{let a=t[l];const s=a.dataIndex?a.dataIndex:[l],x={boolean:{title:a.label?n(a.label):n(l),dataIndex:s,onCell:()=>({props:{style:{width:"60px"}}}),render:(v,o)=>e.jsx(ve,{checked:o[l],checkedChildren:e.jsx(ae,{}),unCheckedChildren:e.jsx(le,{})})},date:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>{const i=N(o[l]).format(c);return e.jsx(D,{bordered:!1,color:a.color,children:i})}},currency:{title:a.label?n(a.label):n(l),dataIndex:s,onCell:()=>({style:{textAlign:"right",whiteSpace:"nowrap"}}),render:(v,o)=>u({amount:o[l]})},async:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>{var i;return e.jsx(D,{bordered:!1,color:a.color||((i=o[l])==null?void 0:i.color)||o.color,children:v})}},color:{title:a.label?a.label:l,dataIndex:s,render:(v,o)=>{var i;return e.jsx(D,{bordered:!1,color:v,children:(i=be.find(b=>b.value===v))==null?void 0:i.label})}},stringWithColor:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>e.jsx(D,{bordered:!1,color:o.color,children:v})},tag:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>e.jsx(D,{bordered:!1,color:a.color,children:o[l]&&o[l]})},selectwithfeedback:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>{if(a.renderAsTag){const i=a.options.find(b=>b.value===o[l]);return e.jsx(D,{bordered:!1,color:i==null?void 0:i.color,children:o[l]&&n(o[l])})}else return o[l]&&n(o[l])}},select:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>{if(a.renderAsTag){const i=a.options.find(b=>b.value===o[l]);return e.jsx(D,{bordered:!1,color:i==null?void 0:i.color,children:o[l]&&o[l]})}else return o[l]&&o[l]}},selectWithTranslation:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>{if(a.renderAsTag){const i=a.options.find(b=>b.value===o[l]);return e.jsx(D,{bordered:!1,color:i==null?void 0:i.color,children:o[l]&&n(o[l])})}else return o[l]&&n(o[l])}},array:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>o[l].map(i=>e.jsx(D,{bordered:!1,color:a.colors[i],children:i},`${W.generate()}`))},country:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>{const i=ye.find(b=>b.value===o[l]);return e.jsxs(D,{bordered:!1,color:a.color||void 0,children:[(i==null?void 0:i.icon)&&(i==null?void 0:i.icon)+" ",(i==null?void 0:i.label)&&n(i.label)]})}}},g={title:a.label?n(a.label):n(l),dataIndex:s},j=a.type;a.disableForTable||(Object.keys(x).includes(j)?d.push(x[j]):d.push(g))}),d}function ca({config:t}){const{dateFormat:n}=Q();let{readColumns:u,fields:c}=t;const d=K(),{result:l}=O(je),{state:a}=L(),{isReadBoxOpen:s}=a,[x,g]=p.useState([]);c&&(u=[...De({fields:c,translate:d})]),p.useEffect(()=>{const o=[];u.map(i=>{const b=i.dataIndex,B=i.title,C=i.isDate||!1;let m=q(l,b);m=C?N(m).format(n):m,o.push({propsKey:b,label:B,value:m})}),g(o)},[l]);const j=s?{display:"block",opacity:1}:{display:"none",opacity:0},v=x.map(o=>e.jsxs(J,{gutter:12,children:[e.jsx(Y,{className:"gutter-row",span:8,children:e.jsx("p",{children:o.label})}),e.jsx(Y,{className:"gutter-row",span:2,children:e.jsx("p",{children:" : "})}),e.jsx(Y,{className:"gutter-row",span:14,children:e.jsx("p",{children:o.value})})]},o.propsKey));return e.jsx("div",{style:j,children:v})}function Le({config:t,onRerender:n}){let{entity:u,searchConfig:c}=t;const{displayLabels:d,searchFields:l,outputValue:a="_id"}=c,s=_(),{crudContextAction:x}=L(),{panel:g,collapsedBox:j,readBox:v}=x,{result:o,isLoading:i,isSuccess:b}=O(Me),[B,C]=p.useState([]),[m,I]=p.useState(void 0),r=p.useRef(!1),[E,T]=p.useState(!1),[A,M]=p.useState(""),[F,Z]=p.useState(""),[,y]=de(()=>{Z(A)},500,[A]),U=h=>d.map(w=>h[w]).join(" ");p.useEffect(()=>{if(F!=""){const h={q:F,fields:l};s(S.search({entity:u,options:h}))}return()=>{y()}},[F]);const z=h=>{h&&h!=""&&(r.current=!0,T(!0),C([]),I(void 0),M(h))},f=h=>{const w=o.find(X=>X[a]===h);s(S.currentItem({data:w})),g.open(),j.open(),v.open(),n()};return p.useEffect(()=>{r.current&&(b?C(o):(T(!1),I(void 0),C([])))},[b,o]),e.jsx(k,{loading:i,showSearch:!0,allowClear:!0,placeholder:e.jsx(ne,{style:{float:"right",padding:"8px 0"}}),defaultActiveFirstOption:!1,filterOption:!1,notFoundContent:E?"... Searching":e.jsx(oe,{}),value:m,onSearch:z,style:{width:"100%"},onSelect:f,children:B.map(h=>e.jsx(k.Option,{value:h[a],children:U(h)},h[a]))})}function sa({config:t}){const[n,u]=p.useState([0]),c=()=>{u([n+1])};return n.map(d=>e.jsx(Le,{config:t,onRerender:c},d))}function we({config:t}){const{crudContextAction:n}=L(),{collapsedBox:u,panel:c}=n,{ADD_NEW_ENTITY:d}=t,l=()=>{c.open(),u.close()};return e.jsx(H,{onClick:l,type:"primary",children:d})}function ra({config:t,extra:n=[]}){let{entity:u,dataTableColumns:c,DATATABLE_TITLE:d,fields:l}=t;const{crudContextAction:a}=L(),{panel:s,collapsedBox:x,modal:g,readBox:j,editBox:v,advancedBox:o}=a,i=K(),{moneyFormatter:b}=ue(),{dateFormat:B}=Q(),C=[{label:i("Show"),key:"read",icon:e.jsx(te,{})},{label:i("Edit"),key:"edit",icon:e.jsx(ie,{})},...n,{type:"divider"},{label:i("Delete"),key:"delete",icon:e.jsx(pe,{})}],m=f=>{y(S.currentItem({data:f})),s.open(),x.open(),j.open()};function I(f){y(S.currentItem({data:f})),y(S.currentAction({actionType:"update",data:f})),v.open(),s.open(),x.open()}function r(f){y(S.currentAction({actionType:"delete",data:f})),g.open()}function E(f){y(S.currentItem({data:f})),y(S.currentAction({actionType:"update",data:f})),o.open(),s.open(),x.open()}let T=[];l?T=[...Ee({fields:l,translate:i,moneyFormatter:b,dateFormat:B})]:T=[...c],c=[...T,{title:"",key:"action",fixed:"right",render:(f,h)=>e.jsx(xe,{menu:{items:C,onClick:({key:w})=>{switch(w){case"read":m(h);break;case"edit":I(h);break;case"delete":r(h);break;case"updatePassword":E(h);break}}},trigger:["click"],children:e.jsx(he,{style:{cursor:"pointer",fontSize:"24px"},onClick:w=>w.preventDefault()})})}];const{result:A,isLoading:M}=O(Be),{pagination:F,items:Z}=A,y=_(),U=p.useCallback(f=>{const h={page:f.current||1,items:f.pageSize||10};y(S.list({entity:u,options:h}))},[]),z=()=>{y(S.list({entity:u}))};return p.useEffect(()=>{const f=new AbortController;return z(),()=>{f.abort()}},[]),e.jsxs(e.Fragment,{children:[e.jsx(se,{onBack:()=>window.history.back(),title:d,ghost:!1,extra:[e.jsx(H,{onClick:U,children:i("Refresh")},`${W.generate()}`),e.jsx(we,{config:t},`${W.generate()}`)],style:{padding:"20px 0px"}}),e.jsx(Se,{columns:c,rowKey:f=>f._id,dataSource:Z,pagination:F,loading:M,onChange:U,scroll:{x:!0}})]})}function Ne({children:t}){return e.jsx(ee,{children:t})}const Ge=({onChange:t,title:n})=>e.jsx("div",{className:"collapseBoxHeader",onClick:t,children:n}),Pe=({isOpen:t,children:n})=>{const u=t?{display:"block",opacity:1}:{display:"none",opacity:0};return e.jsx("div",{className:"TopCollapseBox",children:e.jsx("div",{style:u,children:e.jsx(J,{children:e.jsxs(Y,{span:24,children:[" ",n]})})})})},Re=({isOpen:t,children:n})=>{const u=t?{display:"none",opacity:0}:{display:"block",opacity:1};return e.jsx("div",{className:"BottomCollapseBox",children:e.jsx("div",{style:u,children:e.jsx(J,{children:e.jsxs(Y,{span:24,children:[" ",n]})})})})};function Oe({topContent:t,bottomContent:n,buttonTitle:u,isCollapsed:c,onCollapse:d}){const l=c?"collapsed":"";return e.jsxs(e.Fragment,{children:[e.jsx(Pe,{isOpen:c,children:t}),e.jsxs("div",{className:"collapseBox "+l,children:[e.jsx(Ge,{title:u,onChange:d}),e.jsx("div",{className:"whiteBg"}),e.jsx(Re,{isOpen:c,children:n})]})]})}const{useBreakpoint:Fe}=ge;function Ye({config:t,topContent:n,bottomContent:u,fixHeaderPanel:c}){Fe();const{ADD_NEW_ENTITY:d}=t,{state:l,crudContextAction:a}=L(),{isPanelClose:s,isBoxCollapsed:x}=l,{panel:g,collapsedBox:j}=a,[v,o]=p.useState(s),[i,b]=p.useState("-1px"),[B,C]=p.useState(0),[m,I]=p.useState("20px");p.useEffect(()=>{let T=[];return s?(C(0),I("20px"),T=setTimeout(()=>{b("-1px"),o(s)},200)):(o(s),b(0),T=setTimeout(()=>{C(1),I(0)},200)),()=>clearTimeout(T)},[s]);const r=()=>{g.collapse()},E=()=>{j.collapse()};return e.jsx(fe,{title:t.PANEL_TITLE,placement:"right",onClose:r,open:!s,width:450,children:e.jsxs("div",{className:"sidePanelContent",style:{opacity:B,paddingTop:m},children:[c,e.jsx(Oe,{buttonTitle:d,isCollapsed:x,onCollapse:E,topContent:n,bottomContent:u})]})})}const{Content:He}=ce,_e=({children:t})=>{const{state:n,crudContextAction:u}=L();$();const{isPanelClose:c}=n,[d,l]=p.useState(c);return p.useEffect(()=>{let a=[];return c?a=setTimeout(()=>{l(c)},200):l(c),()=>clearTimeout(a)},[c]),e.jsx(He,{className:"whiteBox shadow layoutPadding",style:{margin:"30px auto",width:"100%",maxWidth:"100%",flex:"none"},children:t})};function ua({children:t,config:n,sidePanelTopContent:u,sidePanelBottomContent:c,fixHeaderPanel:d}){return e.jsx(e.Fragment,{children:e.jsxs(Ne,{children:[e.jsx(Ye,{config:n,topContent:u,bottomContent:c,fixHeaderPanel:d}),e.jsxs(_e,{children:[" ",t]})]})})}export{ua as C,ra as D,ca as R,sa as S,ta as U,oa as a,ia as b,je as c,ye as d,Ie as s};
