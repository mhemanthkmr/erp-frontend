import{al as P,aA as _,an as O,a as p,am as e}from"./index-NNRCG9Rm.js";import{c as S}from"./actions-l-YzO_Wk.js";import{u as L,C as ee}from"./index-vCtOLfRs.js";import{a9 as G,V as K,ad as V,O as H,U as $,ai as ae,C as le,a8 as J,a6 as Y,ab as k,aE as ne,aF as oe,a3 as te,a4 as ie,X as ce}from"./IdurarOs-hOF3usfi.js";import{d as N,P as se}from"./index-nierwHcH.js";import{a as q}from"./helpers-rPTOY0Yj.js";import{M as re}from"./index-ESSCVN9R.js";import{a as Q,u as ue}from"./useDate-Fz8rfIL3.js";import{u as de}from"./useDebounce--08Pdi1N.js";import{s as W}from"./index-xrkCjAY0.js";import{c as be}from"./color-tz1ocuTw.js";import{S as ve}from"./index-CB1vN1Z7.js";import{T as D}from"./index-ntKD6FMB.js";import{D as pe}from"./DeleteOutlined-XARtgMJL.js";import{g as me,D as xe,E as he,j as fe}from"./ErpApp-og-vdlRX.js";import{T as Se}from"./Table-yESaXSHN.js";function Ce(){return me()}const ge={useBreakpoint:Ce},R=t=>t.crud,je=P([R],t=>t.current),Be=P([R],t=>t.list),Te=P([R],t=>t.create),Ie=P([R],t=>t.update);P([R],t=>t.read);const Ae=P([R],t=>t.delete),Me=P([R],t=>t.search);function oa({config:t,formElements:n,withUpload:u=!1}){let{entity:c}=t;const d=_(),{isLoading:l,isSuccess:a}=O(Te),{crudContextAction:s}=L(),{panel:x,collapsedBox:g,readBox:j}=s,[v]=G.useForm(),o=K(),i=b=>{b.file&&u&&(b.file=b.file[0].originFileObj);const B=Object.keys(b).reduce((C,m)=>(C[m]=typeof b[m]=="string"?b[m].trim():b[m],C),{});d(S.create({entity:c,jsonData:B,withUpload:u}))};return p.useEffect(()=>{a&&(j.open(),g.open(),x.open(),v.resetFields(),d(S.resetAction({actionType:"create"})),d(S.list({entity:c})))},[a]),e.jsx(V,{isLoading:l,children:e.jsxs(G,{form:v,layout:"vertical",onFinish:i,children:[n,e.jsx(G.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",children:o("Submit")})})]})})}function ta({config:t,formElements:n,withUpload:u=!1}){let{entity:c}=t;const d=K(),l=_(),{current:a,isLoading:s,isSuccess:x}=O(Ie),{state:g,crudContextAction:j}=L(),{panel:v,collapsedBox:o,readBox:i}=j,b=()=>{i.open()},[B]=G.useForm(),C=r=>{const E=a._id;r.file&&u&&(r.file=r.file[0].originFileObj);const T=Object.keys(r).reduce((A,M)=>(A[M]=typeof r[M]=="string"?r[M].trim():r[M],A),{});l(S.update({entity:c,id:E,jsonData:T,withUpload:u}))};p.useEffect(()=>{if(a){let r={...a};r.birthday&&(r={...r,birthday:N(r.birthday).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),r.date&&(r={...r,date:N(r.date).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),r.expiredDate&&(r={...r,expiredDate:N(r.expiredDate).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),r.created&&(r={...r,created:N(r.created).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),r.updated&&(r={...r,updated:N(r.updated).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}),B.resetFields(),B.setFieldsValue(r)}},[a]),p.useEffect(()=>{x&&(i.open(),o.open(),v.open(),B.resetFields(),l(S.resetAction({actionType:"update"})),l(S.list({entity:c})))},[x]);const{isEditBoxOpen:m}=g,I=m?{display:"block",opacity:1}:{display:"none",opacity:0};return e.jsx("div",{style:I,children:e.jsx(V,{isLoading:s,children:e.jsxs(G,{form:B,layout:"vertical",onFinish:C,children:[n,e.jsx(G.Item,{style:{display:"inline-block",paddingRight:"5px"},children:e.jsx(H,{type:"primary",htmlType:"submit",children:d("Save")})}),e.jsx(G.Item,{style:{display:"inline-block",paddingLeft:"5px"},children:e.jsx(H,{onClick:b,children:d("Cancel")})})]})})})}function ia({config:t}){const n=K();let{entity:u,deleteModalLabels:c,deleteMessage:d=n("are_you_sure_you_want_to_delete"),modalTitle:l=n("delete_confirmation")}=t;const a=_(),{current:s,isLoading:x,isSuccess:g}=O(Ae),{state:j,crudContextAction:v}=L(),{appContextAction:o}=$(),{panel:i,readBox:b}=v,{navMenu:B}=o,{isModalOpen:C}=j,{modal:m}=v,[I,r]=p.useState("");p.useEffect(()=>{if(g&&(m.close(),a(S.list({entity:u}))),s){let A=c.map(M=>q(s,M)).join(" ");r(A)}},[g,s]);const E=()=>{const A=s._id;a(S.delete({entity:u,id:A})),b.close(),m.close(),i.close(),B.collapse(),a(S.list({entity:u}))},T=()=>{x||m.close()};return e.jsx(re,{title:l,open:C,onOk:E,onCancel:T,confirmLoading:x,children:e.jsxs("p",{children:[d,I]})})}const ye=[{icon:"ğŸ‡¦ğŸ‡«",label:"Afghanistan",value:"AF"},{icon:"ğŸ‡¦ğŸ‡±",label:"Albania",value:"AL"},{icon:"ğŸ‡©ğŸ‡¿",label:"Algeria",value:"DZ"},{icon:"ğŸ‡¦ğŸ‡©",label:"Andorra",value:"AD"},{icon:"ğŸ‡¦ğŸ‡´",label:"Angola",value:"AO"},{icon:"ğŸ‡¦ğŸ‡®",label:"Anguilla",value:"AI"},{icon:"ğŸ‡¦ğŸ‡·",label:"Argentina",value:"AR"},{icon:"ğŸ‡¦ğŸ‡²",label:"Armenia",value:"AM"},{icon:"ğŸ‡¦ğŸ‡¼",label:"Aruba",value:"AW"},{icon:"ğŸ‡¦ğŸ‡º",label:"Australia",value:"AU"},{icon:"ğŸ‡¦ğŸ‡¹",label:"Austria",value:"AT"},{icon:"ğŸ‡¦ğŸ‡¿",label:"Azerbaijan",value:"AZ"},{icon:"ğŸ‡§ğŸ‡¸",label:"Bahamas",value:"BS"},{icon:"ğŸ‡§ğŸ‡­",label:"Bahrain",value:"BH"},{icon:"ğŸ‡§ğŸ‡©",label:"Bangladesh",value:"BD"},{icon:"ğŸ‡§ğŸ‡§",label:"Barbados",value:"BB"},{icon:"ğŸ‡§ğŸ‡¾",label:"Belarus",value:"BY"},{icon:"ğŸ‡§ğŸ‡ª",label:"Belgium",value:"BE"},{icon:"ğŸ‡§ğŸ‡¿",label:"Belize",value:"BZ"},{icon:"ğŸ‡§ğŸ‡¯",label:"Benin",value:"BJ"},{icon:"ğŸ‡§ğŸ‡²",label:"Bermuda",value:"BM"},{icon:"ğŸ‡§ğŸ‡¹",label:"Bhutan",value:"BT"},{icon:"ğŸ‡§ğŸ‡´",label:"Bolivia",value:"BO"},{icon:"ğŸ‡§ğŸ‡¦",label:"Bosnia and Herzegovina",value:"BA"},{icon:"ğŸ‡§ğŸ‡¼",label:"Botswana",value:"BW"},{icon:"ğŸ‡§ğŸ‡·",label:"Brazil",value:"BR"},{icon:"ğŸ‡§ğŸ‡³",label:"Brunei Darussalam",value:"BN"},{icon:"ğŸ‡§ğŸ‡¬",label:"Bulgaria",value:"BG"},{icon:"ğŸ‡§ğŸ‡«",label:"Burkina Faso",value:"BF"},{icon:"ğŸ‡§ğŸ‡®",label:"Burundi",value:"BI"},{icon:"ğŸ‡¨ğŸ‡»",label:"Cabo Verde",value:"CV"},{icon:"ğŸ‡°ğŸ‡­",label:"Cambodia",value:"KH"},{icon:"ğŸ‡¨ğŸ‡²",label:"Cameroon",value:"CM"},{icon:"ğŸ‡¨ğŸ‡¦",label:"Canada",value:"CA"},{icon:"ğŸ‡¨ğŸ‡«",label:"Central African Republic",value:"CF"},{icon:"ğŸ‡¹ğŸ‡©",label:"Chad",value:"TD"},{icon:"ğŸ‡¨ğŸ‡±",label:"Chile",value:"CL"},{icon:"ğŸ‡¨ğŸ‡³",label:"China",value:"CN"},{icon:"ğŸ‡¨ğŸ‡´",label:"Colombia",value:"CO"},{icon:"ğŸ‡°ğŸ‡²",label:"Comoros",value:"KM"},{icon:"ğŸ‡¨ğŸ‡©",label:"Congo",value:"CD"},{icon:"ğŸ‡¨ğŸ‡¬",label:"Congo",value:"CG"},{icon:"ğŸ‡¨ğŸ‡·",label:"Costa Rica",value:"CR"},{icon:"ğŸ‡­ğŸ‡·",label:"Croatia",value:"HR"},{icon:"ğŸ‡¨ğŸ‡º",label:"Cuba",value:"CU"},{icon:"ğŸ‡¨ğŸ‡¾",label:"Cyprus",value:"CY"},{icon:"ğŸ‡¨ğŸ‡¿",label:"Czechia",value:"CZ"},{icon:"ğŸ‡¨ğŸ‡®",label:"Cote d Ivoire",value:"CI"},{icon:"ğŸ‡©ğŸ‡°",label:"Denmark",value:"DK"},{icon:"ğŸ‡©ğŸ‡¯",label:"Djibouti",value:"DJ"},{icon:"ğŸ‡©ğŸ‡²",label:"Dominica",value:"DM"},{icon:"ğŸ‡©ğŸ‡´",label:"Dominican Republic",value:"DO"},{icon:"ğŸ‡ªğŸ‡¨",label:"Ecuador",value:"EC"},{icon:"ğŸ‡ªğŸ‡¬",label:"Egypt",value:"EG"},{icon:"ğŸ‡¸ğŸ‡»",label:"El Salvador",value:"SV"},{icon:"ğŸ‡ªğŸ‡·",label:"Eritrea",value:"ER"},{icon:"ğŸ‡ªğŸ‡ª",label:"Estonia",value:"EE"},{icon:"ğŸ‡¸ğŸ‡¿",label:"Eswatini",value:"SZ"},{icon:"ğŸ‡ªğŸ‡¹",label:"Ethiopia",value:"ET"},{icon:"ğŸ‡«ğŸ‡¯",label:"Fiji",value:"FJ"},{icon:"ğŸ‡«ğŸ‡®",label:"Finland",value:"FI"},{icon:"ğŸ‡«ğŸ‡·",label:"France",value:"FR"},{icon:"ğŸ‡¬ğŸ‡¦",label:"Gabon",value:"GA"},{icon:"ğŸ‡¬ğŸ‡²",label:"Gambia",value:"GM"},{icon:"ğŸ‡¬ğŸ‡ª",label:"Georgia",value:"GE"},{icon:"ğŸ‡©ğŸ‡ª",label:"Germany",value:"DE"},{icon:"ğŸ‡¬ğŸ‡­",label:"Ghana",value:"GH"},{icon:"ğŸ‡¬ğŸ‡®",label:"Gibraltar",value:"GI"},{icon:"ğŸ‡¬ğŸ‡·",label:"Greece",value:"GR"},{icon:"ğŸ‡¬ğŸ‡±",label:"Greenland",value:"GL"},{icon:"ğŸ‡¬ğŸ‡µ",label:"Guadeloupe",value:"GP"},{icon:"ğŸ‡¬ğŸ‡º",label:"Guam",value:"GU"},{icon:"ğŸ‡¬ğŸ‡¹",label:"Guatemala",value:"GT"},{icon:"ğŸ‡¬ğŸ‡¬",label:"Guernsey",value:"GG"},{icon:"ğŸ‡¬ğŸ‡³",label:"Guinea",value:"GN"},{icon:"ğŸ‡¬ğŸ‡¼",label:"Guinea-Bissau",value:"GW"},{icon:"ğŸ‡¬ğŸ‡¾",label:"Guyana",value:"GY"},{icon:"ğŸ‡­ğŸ‡¹",label:"Haiti",value:"HT"},{icon:"ğŸ‡­ğŸ‡³",label:"Honduras",value:"HN"},{icon:"ğŸ‡­ğŸ‡°",label:"Hong Kong",value:"HK"},{icon:"ğŸ‡­ğŸ‡º",label:"Hungary",value:"HU"},{icon:"ğŸ‡®ğŸ‡¸",label:"Iceland",value:"IS"},{icon:"ğŸ‡®ğŸ‡³",value:"IN",label:"India"},{icon:"ğŸ‡®ğŸ‡©",value:"ID",label:"Indonesia"},{icon:"ğŸ‡®ğŸ‡·",value:"IR",label:"Iran"},{icon:"ğŸ‡®ğŸ‡¶",value:"IQ",label:"Iraq"},{icon:"ğŸ‡®ğŸ‡ª",value:"IE",label:"Ireland"},{icon:"ğŸ‡®ğŸ‡±",value:"IL",label:"Israel"},{icon:"ğŸ‡®ğŸ‡¹",value:"IT",label:"Italy"},{icon:"ğŸ‡¯ğŸ‡²",value:"JM",label:"Jamaica"},{icon:"ğŸ‡¯ğŸ‡µ",value:"JP",label:"Japan"},{icon:"ğŸ‡¯ğŸ‡´",value:"JO",label:"Jordan"},{icon:"ğŸ‡°ğŸ‡¿",value:"KZ",label:"Kazakhstan"},{icon:"ğŸ‡°ğŸ‡ª",value:"KE",label:"Kenya"},{icon:"ğŸ‡°ğŸ‡µ",value:"KP",label:"Korea"},{icon:"ğŸ‡°ğŸ‡·",value:"KR",label:"Korea"},{icon:"ğŸ‡°ğŸ‡¼",value:"KW",label:"Kuwait"},{icon:"ğŸ‡°ğŸ‡¬",value:"KG",label:"Kyrgyzstan"},{icon:"ğŸ‡±ğŸ‡»",value:"LV",label:"Latvia"},{icon:"ğŸ‡±ğŸ‡§",value:"LB",label:"Lebanon"},{icon:"ğŸ‡±ğŸ‡¸",value:"LS",label:"Lesotho"},{icon:"ğŸ‡±ğŸ‡·",value:"LR",label:"Liberia"},{icon:"ğŸ‡±ğŸ‡¾",value:"LY",label:"Libya"},{icon:"ğŸ‡±ğŸ‡®",value:"LI",label:"Liechtenstein"},{icon:"ğŸ‡±ğŸ‡¹",value:"LT",label:"Lithuania"},{icon:"ğŸ‡±ğŸ‡º",value:"LU",label:"Luxembourg"},{icon:"ğŸ‡²ğŸ‡¬",value:"MG",label:"Madagascar"},{icon:"ğŸ‡²ğŸ‡¼",value:"MW",label:"Malawi"},{icon:"ğŸ‡²ğŸ‡¾",value:"MY",label:"Malaysia"},{icon:"ğŸ‡²ğŸ‡»",value:"MV",label:"Maldives"},{icon:"ğŸ‡²ğŸ‡±",value:"ML",label:"Mali"},{icon:"ğŸ‡²ğŸ‡¹",value:"MT",label:"Malta"},{icon:"ğŸ‡²ğŸ‡¶",value:"MQ",label:"Martinique"},{icon:"ğŸ‡²ğŸ‡·",value:"MR",label:"Mauritania"},{icon:"ğŸ‡²ğŸ‡º",value:"MU",label:"Mauritius"},{icon:"ğŸ‡²ğŸ‡½",value:"MX",label:"Mexico"},{icon:"ğŸ‡²ğŸ‡©",value:"MD",label:"Moldova"},{icon:"ğŸ‡²ğŸ‡¨",value:"MC",label:"Monaco"},{icon:"ğŸ‡²ğŸ‡³",value:"MN",label:"Mongolia"},{icon:"ğŸ‡²ğŸ‡ª",value:"ME",label:"Montenegro"},{icon:"ğŸ‡²ğŸ‡¸",value:"MS",label:"Montserrat"},{icon:"ğŸ‡²ğŸ‡¦",value:"MA",label:"Morocco"},{icon:"ğŸ‡²ğŸ‡¿",value:"MZ",label:"Mozambique"},{icon:"ğŸ‡²ğŸ‡²",value:"MM",label:"Myanmar"},{icon:"ğŸ‡³ğŸ‡¦",value:"NA",label:"Namibia"},{icon:"ğŸ‡³ğŸ‡µ",value:"NP",label:"Nepal"},{icon:"ğŸ‡³ğŸ‡±",value:"NL",label:"Netherlands"},{icon:"ğŸ‡³ğŸ‡¨",value:"NC",label:"New Caledonia"},{icon:"ğŸ‡³ğŸ‡¿",value:"NZ",label:"New Zealand"},{icon:"ğŸ‡³ğŸ‡®",value:"NI",label:"Nicaragua"},{icon:"ğŸ‡³ğŸ‡ª",value:"NE",label:"Niger"},{icon:"ğŸ‡³ğŸ‡¬",value:"NG",label:"Nigeria"},{icon:"ğŸ‡³ğŸ‡´",value:"NO",label:"Norway"},{icon:"ğŸ‡´ğŸ‡²",value:"OM",label:"Oman"},{icon:"ğŸ‡µğŸ‡°",value:"PK",label:"Pakistan"},{icon:"ğŸ‡µğŸ‡¸",value:"PS",label:"Palestine"},{icon:"ğŸ‡µğŸ‡¦",value:"PA",label:"Panama"},{icon:"ğŸ‡µğŸ‡¬",value:"PG",label:"Papua New Guinea"},{icon:"ğŸ‡µğŸ‡¾",value:"PY",label:"Paraguay"},{icon:"ğŸ‡µğŸ‡ª",value:"PE",label:"Peru"},{icon:"ğŸ‡µğŸ‡­",value:"PH",label:"Philippines"},{icon:"ğŸ‡µğŸ‡±",value:"PL",label:"Poland"},{icon:"ğŸ‡µğŸ‡¹",value:"PT",label:"Portugal"},{icon:"ğŸ‡µğŸ‡·",value:"PR",label:"Puerto Rico"},{icon:"ğŸ‡¶ğŸ‡¦",value:"QA",label:"Qatar"},{icon:"ğŸ‡²ğŸ‡°",value:"MK",label:"Macedonia"},{icon:"ğŸ‡·ğŸ‡´",value:"RO",label:"Romania"},{icon:"ğŸ‡·ğŸ‡º",value:"RU",label:"Russia"},{icon:"ğŸ‡·ğŸ‡¼",value:"RW",label:"Rwanda"},{icon:"ğŸ‡·ğŸ‡ª",value:"RE",label:"RÃ©union"},{icon:"ğŸ‡¸ğŸ‡¦",value:"SA",label:"Saudi Arabia"},{icon:"ğŸ‡¸ğŸ‡³",value:"SN",label:"Senegal"},{icon:"ğŸ‡·ğŸ‡¸",value:"RS",label:"Serbia"},{icon:"ğŸ‡¸ğŸ‡¬",value:"SG",label:"Singapore"},{icon:"ğŸ‡¸ğŸ‡°",value:"SK",label:"Slovakia"},{icon:"ğŸ‡¸ğŸ‡®",value:"SI",label:"Slovenia"},{icon:"ğŸ‡¸ğŸ‡´",value:"SO",label:"Somalia"},{icon:"ğŸ‡¿ğŸ‡¦",value:"ZA",label:"South Africa"},{icon:"ğŸ‡¸ğŸ‡¸",value:"SS",label:"South Sudan"},{icon:"ğŸ‡ªğŸ‡¸",value:"ES",label:"Spain"},{icon:"ğŸ‡±ğŸ‡°",value:"LK",label:"Sri Lanka"},{icon:"ğŸ‡¸ğŸ‡©",value:"SD",label:"Sudan"},{icon:"ğŸ‡¸ğŸ‡·",value:"SR",label:"Suriname"},{icon:"ğŸ‡¸ğŸ‡ª",value:"SE",label:"Sweden"},{icon:"ğŸ‡¨ğŸ‡­",value:"CH",label:"Switzerland"},{icon:"ğŸ‡¸ğŸ‡¾",value:"SY",label:"Syria"},{icon:"ğŸ‡¹ğŸ‡¼",value:"TW",label:"Taiwan"},{icon:"ğŸ‡¹ğŸ‡¯",value:"TJ",label:"Tajikistan"},{icon:"ğŸ‡¹ğŸ‡¿",value:"TZ",label:"Tanzania"},{icon:"ğŸ‡¹ğŸ‡­",value:"TH",label:"Thailand"},{icon:"ğŸ‡¹ğŸ‡±",value:"TL",label:"Timor-Leste"},{icon:"ğŸ‡¹ğŸ‡¬",value:"TG",label:"Togo"},{icon:"ğŸ‡¹ğŸ‡´",value:"TO",label:"Tonga"},{icon:"ğŸ‡¹ğŸ‡³",value:"TN",label:"Tunisia"},{icon:"ğŸ‡¹ğŸ‡·",value:"TR",label:"Turkey"},{value:"TM",label:"Turkmenistan",icon:"ğŸ‡¹ğŸ‡²"},{value:"UG",label:"Uganda",icon:"ğŸ‡ºğŸ‡¬"},{value:"UA",label:"Ukraine",icon:"ğŸ‡ºğŸ‡¦"},{value:"AE",label:"United Arab Emirates",icon:"ğŸ‡¦ğŸ‡ª"},{value:"GB",label:"United Kingdom",icon:"ğŸ‡¬ğŸ‡§"},{value:"US",label:"United States",icon:"ğŸ‡ºğŸ‡¸"},{value:"UY",label:"Uruguay",icon:"ğŸ‡ºğŸ‡¾"},{value:"UZ",label:"Uzbekistan",icon:"ğŸ‡ºğŸ‡¿"},{value:"VE",label:"Venezuela",icon:"ğŸ‡»ğŸ‡ª"},{value:"VN",label:"Vietnam",icon:"ğŸ‡»ğŸ‡³"},{value:"YE",label:"Yemen",icon:"ğŸ‡¾ğŸ‡ª"},{value:"ZM",label:"Zambia",icon:"ğŸ‡¿ğŸ‡²"},{value:"ZW",label:"Zimbabwe",icon:"ğŸ‡¿ğŸ‡¼"}],De=({fields:t,translate:n})=>{let u=[];return Object.keys(t).forEach(c=>{let d=t[c];u.push({title:d.label?d.label:c,dataIndex:d.dataIndex?d.dataIndex.join("."):c,isDate:d.type==="date"})}),u};function Ee({fields:t,translate:n,moneyFormatter:u,dateFormat:c}){let d=[];return Object.keys(t).forEach(l=>{let a=t[l];const s=a.dataIndex?a.dataIndex:[l],x={boolean:{title:a.label?n(a.label):n(l),dataIndex:s,onCell:()=>({props:{style:{width:"60px"}}}),render:(v,o)=>e.jsx(ve,{checked:o[l],checkedChildren:e.jsx(ae,{}),unCheckedChildren:e.jsx(le,{})})},date:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>{const i=N(o[l]).format(c);return e.jsx(D,{bordered:!1,color:a.color,children:i})}},currency:{title:a.label?n(a.label):n(l),dataIndex:s,onCell:()=>({style:{textAlign:"right",whiteSpace:"nowrap"}}),render:(v,o)=>u({amount:o[l]})},async:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>{var i;return e.jsx(D,{bordered:!1,color:a.color||((i=o[l])==null?void 0:i.color)||o.color,children:v})}},color:{title:a.label?a.label:l,dataIndex:s,render:(v,o)=>{var i;return e.jsx(D,{bordered:!1,color:v,children:(i=be.find(b=>b.value===v))==null?void 0:i.label})}},stringWithColor:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>e.jsx(D,{bordered:!1,color:o.color,children:v})},tag:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>e.jsx(D,{bordered:!1,color:a.color,children:o[l]&&o[l]})},selectwithfeedback:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>{if(a.renderAsTag){const i=a.options.find(b=>b.value===o[l]);return e.jsx(D,{bordered:!1,color:i==null?void 0:i.color,children:o[l]&&n(o[l])})}else return o[l]&&n(o[l])}},select:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>{if(a.renderAsTag){const i=a.options.find(b=>b.value===o[l]);return e.jsx(D,{bordered:!1,color:i==null?void 0:i.color,children:o[l]&&o[l]})}else return o[l]&&o[l]}},selectWithTranslation:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>{if(a.renderAsTag){const i=a.options.find(b=>b.value===o[l]);return e.jsx(D,{bordered:!1,color:i==null?void 0:i.color,children:o[l]&&n(o[l])})}else return o[l]&&n(o[l])}},array:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>o[l].map(i=>e.jsx(D,{bordered:!1,color:a.colors[i],children:i},`${W.generate()}`))},country:{title:a.label?n(a.label):n(l),dataIndex:s,render:(v,o)=>{const i=ye.find(b=>b.value===o[l]);return e.jsxs(D,{bordered:!1,color:a.color||void 0,children:[(i==null?void 0:i.icon)&&(i==null?void 0:i.icon)+" ",(i==null?void 0:i.label)&&n(i.label)]})}}},g={title:a.label?n(a.label):n(l),dataIndex:s},j=a.type;a.disableForTable||(Object.keys(x).includes(j)?d.push(x[j]):d.push(g))}),d}function ca({config:t}){const{dateFormat:n}=Q();let{readColumns:u,fields:c}=t;const d=K(),{result:l}=O(je),{state:a}=L(),{isReadBoxOpen:s}=a,[x,g]=p.useState([]);c&&(u=[...De({fields:c,translate:d})]),p.useEffect(()=>{const o=[];u.map(i=>{const b=i.dataIndex,B=i.title,C=i.isDate||!1;let m=q(l,b);m=C?N(m).format(n):m,o.push({propsKey:b,label:B,value:m})}),g(o)},[l]);const j=s?{display:"block",opacity:1}:{display:"none",opacity:0},v=x.map(o=>e.jsxs(J,{gutter:12,children:[e.jsx(Y,{className:"gutter-row",span:8,children:e.jsx("p",{children:o.label})}),e.jsx(Y,{className:"gutter-row",span:2,children:e.jsx("p",{children:" : "})}),e.jsx(Y,{className:"gutter-row",span:14,children:e.jsx("p",{children:o.value})})]},o.propsKey));return e.jsx("div",{style:j,children:v})}function Le({config:t,onRerender:n}){let{entity:u,searchConfig:c}=t;const{displayLabels:d,searchFields:l,outputValue:a="_id"}=c,s=_(),{crudContextAction:x}=L(),{panel:g,collapsedBox:j,readBox:v}=x,{result:o,isLoading:i,isSuccess:b}=O(Me),[B,C]=p.useState([]),[m,I]=p.useState(void 0),r=p.useRef(!1),[E,T]=p.useState(!1),[A,M]=p.useState(""),[F,Z]=p.useState(""),[,y]=de(()=>{Z(A)},500,[A]),U=h=>d.map(w=>h[w]).join(" ");p.useEffect(()=>{if(F!=""){const h={q:F,fields:l};s(S.search({entity:u,options:h}))}return()=>{y()}},[F]);const z=h=>{h&&h!=""&&(r.current=!0,T(!0),C([]),I(void 0),M(h))},f=h=>{const w=o.find(X=>X[a]===h);s(S.currentItem({data:w})),g.open(),j.open(),v.open(),n()};return p.useEffect(()=>{r.current&&(b?C(o):(T(!1),I(void 0),C([])))},[b,o]),e.jsx(k,{loading:i,showSearch:!0,allowClear:!0,placeholder:e.jsx(ne,{style:{float:"right",padding:"8px 0"}}),defaultActiveFirstOption:!1,filterOption:!1,notFoundContent:E?"... Searching":e.jsx(oe,{}),value:m,onSearch:z,style:{width:"100%"},onSelect:f,children:B.map(h=>e.jsx(k.Option,{value:h[a],children:U(h)},h[a]))})}function sa({config:t}){const[n,u]=p.useState([0]),c=()=>{u([n+1])};return n.map(d=>e.jsx(Le,{config:t,onRerender:c},d))}function we({config:t}){const{crudContextAction:n}=L(),{collapsedBox:u,panel:c}=n,{ADD_NEW_ENTITY:d}=t,l=()=>{c.open(),u.close()};return e.jsx(H,{onClick:l,type:"primary",children:d})}function ra({config:t,extra:n=[]}){let{entity:u,dataTableColumns:c,DATATABLE_TITLE:d,fields:l}=t;const{crudContextAction:a}=L(),{panel:s,collapsedBox:x,modal:g,readBox:j,editBox:v,advancedBox:o}=a,i=K(),{moneyFormatter:b}=ue(),{dateFormat:B}=Q(),C=[{label:i("Show"),key:"read",icon:e.jsx(te,{})},{label:i("Edit"),key:"edit",icon:e.jsx(ie,{})},...n,{type:"divider"},{label:i("Delete"),key:"delete",icon:e.jsx(pe,{})}],m=f=>{y(S.currentItem({data:f})),s.open(),x.open(),j.open()};function I(f){y(S.currentItem({data:f})),y(S.currentAction({actionType:"update",data:f})),v.open(),s.open(),x.open()}function r(f){y(S.currentAction({actionType:"delete",data:f})),g.open()}function E(f){y(S.currentItem({data:f})),y(S.currentAction({actionType:"update",data:f})),o.open(),s.open(),x.open()}let T=[];l?T=[...Ee({fields:l,translate:i,moneyFormatter:b,dateFormat:B})]:T=[...c],c=[...T,{title:"",key:"action",fixed:"right",render:(f,h)=>e.jsx(xe,{menu:{items:C,onClick:({key:w})=>{switch(w){case"read":m(h);break;case"edit":I(h);break;case"delete":r(h);break;case"updatePassword":E(h);break}}},trigger:["click"],children:e.jsx(he,{style:{cursor:"pointer",fontSize:"24px"},onClick:w=>w.preventDefault()})})}];const{result:A,isLoading:M}=O(Be),{pagination:F,items:Z}=A,y=_(),U=p.useCallback(f=>{const h={page:f.current||1,items:f.pageSize||10};y(S.list({entity:u,options:h}))},[]),z=()=>{y(S.list({entity:u}))};return p.useEffect(()=>{const f=new AbortController;return z(),()=>{f.abort()}},[]),e.jsxs(e.Fragment,{children:[e.jsx(se,{onBack:()=>window.history.back(),title:d,ghost:!1,extra:[e.jsx(H,{onClick:U,children:i("Refresh")},`${W.generate()}`),e.jsx(we,{config:t},`${W.generate()}`)],style:{padding:"20px 0px"}}),e.jsx(Se,{columns:c,rowKey:f=>f._id,dataSource:Z,pagination:F,loading:M,onChange:U,scroll:{x:!0}})]})}function Ne({children:t}){return e.jsx(ee,{children:t})}const Ge=({onChange:t,title:n})=>e.jsx("div",{className:"collapseBoxHeader",onClick:t,children:n}),Pe=({isOpen:t,children:n})=>{const u=t?{display:"block",opacity:1}:{display:"none",opacity:0};return e.jsx("div",{className:"TopCollapseBox",children:e.jsx("div",{style:u,children:e.jsx(J,{children:e.jsxs(Y,{span:24,children:[" ",n]})})})})},Re=({isOpen:t,children:n})=>{const u=t?{display:"none",opacity:0}:{display:"block",opacity:1};return e.jsx("div",{className:"BottomCollapseBox",children:e.jsx("div",{style:u,children:e.jsx(J,{children:e.jsxs(Y,{span:24,children:[" ",n]})})})})};function Oe({topContent:t,bottomContent:n,buttonTitle:u,isCollapsed:c,onCollapse:d}){const l=c?"collapsed":"";return e.jsxs(e.Fragment,{children:[e.jsx(Pe,{isOpen:c,children:t}),e.jsxs("div",{className:"collapseBox "+l,children:[e.jsx(Ge,{title:u,onChange:d}),e.jsx("div",{className:"whiteBg"}),e.jsx(Re,{isOpen:c,children:n})]})]})}const{useBreakpoint:Fe}=ge;function Ye({config:t,topContent:n,bottomContent:u,fixHeaderPanel:c}){Fe();const{ADD_NEW_ENTITY:d}=t,{state:l,crudContextAction:a}=L(),{isPanelClose:s,isBoxCollapsed:x}=l,{panel:g,collapsedBox:j}=a,[v,o]=p.useState(s),[i,b]=p.useState("-1px"),[B,C]=p.useState(0),[m,I]=p.useState("20px");p.useEffect(()=>{let T=[];return s?(C(0),I("20px"),T=setTimeout(()=>{b("-1px"),o(s)},200)):(o(s),b(0),T=setTimeout(()=>{C(1),I(0)},200)),()=>clearTimeout(T)},[s]);const r=()=>{g.collapse()},E=()=>{j.collapse()};return e.jsx(fe,{title:t.PANEL_TITLE,placement:"right",onClose:r,open:!s,width:450,children:e.jsxs("div",{className:"sidePanelContent",style:{opacity:B,paddingTop:m},children:[c,e.jsx(Oe,{buttonTitle:d,isCollapsed:x,onCollapse:E,topContent:n,bottomContent:u})]})})}const{Content:He}=ce,_e=({children:t})=>{const{state:n,crudContextAction:u}=L();$();const{isPanelClose:c}=n,[d,l]=p.useState(c);return p.useEffect(()=>{let a=[];return c?a=setTimeout(()=>{l(c)},200):l(c),()=>clearTimeout(a)},[c]),e.jsx(He,{className:"whiteBox shadow layoutPadding",style:{margin:"30px auto",width:"100%",maxWidth:"100%",flex:"none"},children:t})};function ua({children:t,config:n,sidePanelTopContent:u,sidePanelBottomContent:c,fixHeaderPanel:d}){return e.jsx(e.Fragment,{children:e.jsxs(Ne,{children:[e.jsx(Ye,{config:n,topContent:u,bottomContent:c,fixHeaderPanel:d}),e.jsxs(_e,{children:[" ",t]})]})})}export{ua as C,ra as D,ca as R,sa as S,ta as U,oa as a,ia as b,je as c,ye as d,Ie as s};
