import{a as l,h as D,aA as w,aB as R,an as f,am as t,aC as M,aG as B}from"./index-NNRCG9Rm.js";import{A as k,V as v,O as c,a5 as F,ae as H,a4 as V,a8 as g,a7 as T,a6 as r,af as W}from"./IdurarOs-hOF3usfi.js";import"./index-vCtOLfRs.js";import{c as A,b as Y,E as z}from"./selectors-ODi0nExu.js";import{P as G}from"./index-nierwHcH.js";import{e as y}from"./actions-NDaFrLo5.js";import{s as d}from"./index-xrkCjAY0.js";import{u as U}from"./useDate-Fz8rfIL3.js";import{t as q}from"./statusTagColor-sG5xH6CK.js";import{u as J}from"./useMail-hc4anCKM.js";import{T as K}from"./index-ntKD6FMB.js";import{S as m}from"./index-lIOrhGAA.js";import{D as u}from"./index-bUsKcndE.js";import{C as Q}from"./CloseCircleOutlined-agQ2nFs_.js";import{F as X}from"./FilePdfOutlined-4twY-BbQ.js";import"./ErpApp-og-vdlRX.js";import"./currency.es--or6eeOG.js";var Z={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"};const tt=Z;var et=function(o,e){return l.createElement(k,D({},o,{ref:e,icon:tt}))};const st=l.forwardRef(et);function at({config:n,selectedItem:o}){var E;const e=v(),{entity:a,ENTITY_NAME:p}=n,C=w(),{moneyFormatter:i}=U(),{send:$,isLoading:I}=J({entity:a}),x=R(),{result:h}=f(A),N={status:"",client:{name:"",email:"",phone:"",address:""},subTotal:0,taxTotal:0,taxRate:0,total:0,credit:0,number:0,year:0},[s,_]=l.useState(o??N),[j,b]=l.useState({});return l.useEffect(()=>{const L=new AbortController;if(h){const{invoice:P,_id:S,...O}=h;_({...O,...P,_id:S})}return()=>L.abort()},[h]),l.useEffect(()=>{s!=null&&s.client&&b(s.client[s.client.type])},[s]),t.jsxs(t.Fragment,{children:[t.jsx(G,{onBack:()=>{x(`/${a.toLowerCase()}`)},title:`${p} # ${s.number}/${s.year||""}`,ghost:!1,tags:t.jsx(K,{color:(E=q(s.paymentStatus))==null?void 0:E.color,children:s.paymentStatus}),extra:[t.jsx(c,{onClick:()=>{x(`/${a.toLowerCase()}`)},icon:t.jsx(Q,{}),children:e("Close")},`${d.generate()}`),t.jsx(c,{onClick:()=>{window.open(`${F}${a}/${a}-${s._id}.pdf`,"_blank")},icon:t.jsx(X,{}),children:e("Download PDF")},`${d.generate()}`),t.jsx(c,{loading:I,onClick:()=>{$(s._id)},icon:t.jsx(H,{}),children:e("Send by email")},`${d.generate()}`),t.jsx(c,{onClick:()=>{C(y.currentAction({actionType:"update",data:s})),x(`/${a.toLowerCase()}/update/${s._id}`)},type:"primary",icon:t.jsx(V,{}),children:e("Edit")},`${d.generate()}`)],style:{padding:"20px 0px"},children:t.jsxs(g,{children:[t.jsx(m,{title:"Status",value:s.status}),t.jsx(m,{title:e("SubTotal"),value:i({amount:s.subTotal}),style:{margin:"0 32px"}}),t.jsx(m,{title:e("Total"),value:i({amount:s.total}),style:{margin:"0 32px"}}),t.jsx(m,{title:e("Amount"),value:i({amount:s.amount}),style:{margin:"0 32px"}})]})}),t.jsx(T,{dashed:!0}),t.jsxs(u,{title:`${e("Client")} : ${s.client.name}`,children:[t.jsx(u.Item,{label:e("Address"),children:j.address}),t.jsx(u.Item,{label:e("email"),children:j.email}),t.jsx(u.Item,{label:e("Phone"),children:j.phone})]}),t.jsx(T,{}),t.jsxs(g,{children:[t.jsx(r,{sm:24,md:12,children:t.jsxs(W.Title,{level:5,children:[e("Payment Information")," :"]})}),t.jsx(r,{sm:24,md:12,style:{textAlign:"right"},children:t.jsx(c,{icon:t.jsx(st,{}),children:e("Show invoice")})})]}),t.jsx("div",{style:{width:"300px",float:"left",textAlign:"right",fontWeight:"700"},children:t.jsxs(g,{gutter:[12,-5],children:[t.jsx(r,{className:"gutter-row",span:12,children:t.jsxs("p",{children:[e("Amount")," :"]})}),t.jsx(r,{className:"gutter-row",span:12,children:t.jsx("p",{children:i({amount:s.amount})})}),t.jsx(r,{className:"gutter-row",span:12,children:t.jsxs("p",{children:[e("Total")," :"]})}),t.jsx(r,{className:"gutter-row",span:12,children:t.jsx("p",{children:i({amount:s.total})})}),t.jsx(r,{className:"gutter-row",span:12,children:t.jsxs("p",{children:[e("Total Paid")," :"]})}),t.jsx(r,{className:"gutter-row",span:12,children:t.jsx("p",{children:i({amount:s.credit})})}),t.jsx(r,{className:"gutter-row",span:12,children:t.jsxs("p",{children:[e("Total Remaining")," :"]})}),t.jsx(r,{className:"gutter-row",span:12,children:t.jsx("p",{children:i({amount:s.total-s.credit})})})]})})]})}function nt({config:n}){const o=w(),{id:e}=M();let a=f(Y(e));l.useEffect(()=>{o(a?y.currentItem({data:a}):y.read({entity:n.entity,id:e}))},[a]);const{result:p}=f(A);return a=p,t.jsx(z,{children:a?t.jsx(at,{config:n,selectedItem:a}):t.jsx(B,{})})}function wt(){const n=v(),o="payment",e={PANEL_TITLE:n("payment"),DATATABLE_TITLE:n("payment_list"),ADD_NEW_ENTITY:n("add_new_payment"),ENTITY_NAME:n("payment")},a={entity:o,...e};return t.jsx(nt,{config:a})}export{wt as default};
