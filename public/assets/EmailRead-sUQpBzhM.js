import{aA as E,aB as A,an as f,a as d,am as e,aC as N,aG as I}from"./index-NNRCG9Rm.js";import{V as y,O as u,a4 as P,a7 as $,af as b,ac as v}from"./IdurarOs-hOF3usfi.js";import{a as B}from"./index-vCtOLfRs.js";import{c as R,s as S,E as p}from"./selectors-ODi0nExu.js";import{P as w}from"./index-nierwHcH.js";import{e as h}from"./actions-NDaFrLo5.js";import{s as x}from"./index-xrkCjAY0.js";import{C as D}from"./CloseCircleOutlined-agQ2nFs_.js";import"./ErpApp-og-vdlRX.js";const{Title:j,Paragraph:M}=b;function k({config:s,selectedItem:a}){const t=y(),{entity:r,ENTITY_NAME:n}=s,i=E(),{erpContextAction:_}=B(),l=A(),{result:c}=f(R),{readPanel:m,updatePanel:g}=_,T={emailName:"",emailKey:"",emailSubject:"",emailBody:"",emailVariables:[],_id:""},[o,C]=d.useState(a??T);return d.useEffect(()=>{const L=new AbortController;return c&&C(c),()=>L.abort()},[c]),e.jsxs(e.Fragment,{children:[e.jsx(w,{onBack:()=>{m.close(),l(`/${r.toLowerCase()}`)},title:`${n} # ${o==null?void 0:o.emailName}`,ghost:!1,extra:[e.jsx(u,{onClick:()=>{m.close(),l(`/${r.toLowerCase()}`)},icon:e.jsx(D,{}),children:t("Close")},`${x.generate()}`),e.jsx(u,{onClick:()=>{i(h.currentAction({actionType:"update",data:o})),g.open(),l(`/${r.toLowerCase()}/update/${o._id}`)},type:"primary",icon:e.jsx(P,{}),children:t("Edit")},`${x.generate()}`)],style:{padding:"20px 0px"}}),e.jsx($,{dashed:!0}),e.jsxs("div",{children:[e.jsx(j,{level:3,children:t("Subject")}),e.jsx(M,{children:o.emailSubject}),e.jsx(j,{level:3,children:t("Body")}),e.jsx("div",{dangerouslySetInnerHTML:{__html:o.emailBody}})]})]})}function O({config:s}){const a=E(),{id:t}=N();d.useLayoutEffect(()=>{a(h.read({entity:s.entity,id:t}))},[t]);const{result:r,isSuccess:n,isLoading:i=!0}=f(S);return i?e.jsx(p,{children:e.jsx(I,{})}):e.jsx(p,{children:n?e.jsx(k,{config:s,selectedItem:r}):e.jsx(v,{entity:s.entity})})}function J(){const s="email",a=y(),t={PANEL_TITLE:a("email_template"),DATATABLE_TITLE:a("email_template_list"),ADD_NEW_ENTITY:a("add_new_email_template"),ENTITY_NAME:a("email_template")},r={entity:s,create:!1,...t};return e.jsx(O,{config:r})}export{J as default};
