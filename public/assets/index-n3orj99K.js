import{a as s,am as l}from"./index-NNRCG9Rm.js";import{ag as w,ab as p,aF as F,$ as H}from"./IdurarOs-hOF3usfi.js";import{u as L}from"./useDebounce--08Pdi1N.js";function z({entity:g,displayLabels:b,searchFields:E,outputValue:r="_id",value:t,onChange:a}){const[O,c]=s.useState([]),[j,n]=s.useState(void 0),S=s.useRef(!0),o=s.useRef(!1),[x,i]=s.useState(!1),[h,y]=s.useState(""),[f,A]=s.useState(""),[,C]=L(()=>{A(h)},500,[h]),R=async e=>await H.search({entity:g,options:e});let{onFetch:q,result:d,isSuccess:m,isLoading:v}=w();const D=e=>b.map(u=>e[u]).join(" ");s.useEffect(()=>{if(f!=""){const u=R({q:f,fields:E});q(u)}return()=>{C()}},[f]);const k=e=>{e&&e!=""&&(o.current=!0,i(!0),c([]),n(void 0),y(e))};return s.useEffect(()=>{o.current&&(m?c(d):(i(!1),n(void 0),c([])))},[m,d]),s.useEffect(()=>{t&&S.current&&(o.current||c([t]),n(t[r]||t),a(t[r]||t),S.current=!1)},[t]),l.jsx(p,{loading:v,showSearch:!0,allowClear:!0,placeholder:"Search Here",defaultActiveFirstOption:!1,filterOption:!1,notFoundContent:x?"... Searching":l.jsx(F,{}),value:j,onSearch:k,onChange:e=>{a&&e&&a(e[r]||e)},onClear:()=>{c([]),n(void 0),i(!1)},children:O.map(e=>l.jsx(p.Option,{value:e[r]||e,children:D(e)},e[r]||e))})}export{z as A};
