import{am as e,aA as y,an as T,a as E}from"./index-NNRCG9Rm.js";import{V as h,a3 as N,a9 as u,ag as _,ad as S,aa as D,O as d,$ as O,M as v,a4 as U,ah as B,a8 as f,a6 as C,ai as R,C as M}from"./IdurarOs-hOF3usfi.js";import{D as z,s as Y,C as q,a as H,b as V,c as $,R as W,U as G,S as J}from"./index-ddq5tu2v.js";import{c as x}from"./actions-l-YzO_Wk.js";import{u as I}from"./index-vCtOLfRs.js";import{D as K}from"./DeleteOutlined-XARtgMJL.js";import{P as Q}from"./PlusOutlined-RgQQQ1Jv.js";import{A as w}from"./AdminForm-QlBFnRJj.js";import{S as X}from"./index-CB1vN1Z7.js";import"./index-nierwHcH.js";import"./ErpApp-og-vdlRX.js";import"./helpers-rPTOY0Yj.js";import"./index-ESSCVN9R.js";import"./fade-dRQe2G23.js";import"./useDate-Fz8rfIL3.js";import"./currency.es--or6eeOG.js";import"./useDebounce--08Pdi1N.js";import"./index-xrkCjAY0.js";import"./color-tz1ocuTw.js";import"./index-ntKD6FMB.js";import"./Table-yESaXSHN.js";import"./zh_CN-pm_5gTTN.js";import"./UploadOutlined-DrEEYYsW.js";import"./progress-r0o2llHg.js";function Z({config:t}){const s=h();return e.jsx(z,{config:t,extra:[{label:s("Update Password"),key:"updatePassword",icon:e.jsx(N,{})}]})}function ee({config:t}){const s=h(),a=y(),{current:n}=T(Y),{state:c,crudContextAction:l}=I(),[o]=u.useForm(),{onFetch:r,result:i,isLoading:m,isSuccess:p}=_(),j=k=>{const L="admin/password-update/"+n._id,g=(async()=>await O.patch({entity:L,jsonData:k}))();r(g)},{readBox:A}=l,P=()=>{A.open()};E.useEffect(()=>{p&&(o.resetFields(),a(x.resetAction({actionType:"update"})))},[p]);const{isAdvancedBoxOpen:F}=c,b=F?{display:"block",opacity:1}:{display:"none",opacity:0};return e.jsx("div",{style:b,children:e.jsxs(S,{isLoading:m,children:[e.jsx("h3",{children:s("Update Password")}),e.jsx("div",{className:"space10"}),e.jsxs(u,{form:o,layout:"vertical",onFinish:j,children:[e.jsx(u.Item,{label:s("New Password"),name:"password",rules:[{required:!0}],children:e.jsx(D.Password,{autoComplete:"new-password"})}),e.jsx(u.Item,{style:{display:"inline-block",paddingRight:"5px"},children:e.jsx(d,{type:"primary",htmlType:"submit",children:s("Save")})}),e.jsx(u.Item,{style:{display:"inline-block",paddingLeft:"5px"},children:e.jsx(d,{onClick:P,children:s("Cancel")})})]})]})})}function te({config:t,formElements:s}){const a=h(),{crudContextAction:n}=I(),{advancedBox:c,modal:l,editBox:o}=n,{result:r}=T($),i=y(),m=()=>{i(x.currentAction({actionType:"delete",data:r})),l.open()},p=()=>{i(x.currentAction({actionType:"update",data:r})),o.open()},j=()=>{i(x.currentAction({actionType:"update",data:r})),c.open()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space20"}),e.jsxs(v,{children:[e.jsx(d,{onClick:m,type:"text",icon:e.jsx(K,{}),size:"small",children:a("remove")}),e.jsx(d,{onClick:p,type:"text",icon:e.jsx(U,{}),size:"small",children:a("edit")}),e.jsx(d,{onClick:j,type:"text",icon:e.jsx(B,{}),size:"small",children:a("Update Password")})]}),e.jsx("div",{className:"space20"}),e.jsx(W,{config:t}),e.jsx(G,{config:t,formElements:s,withUpload:!0}),e.jsx(ee,{config:t})]})}function se({config:t}){const{crudContextAction:s}=I(),{collapsedBox:a}=s,n=()=>{a.close()};return e.jsxs(e.Fragment,{children:[e.jsx(f,{gutter:12,children:e.jsx(C,{className:"gutter-row",span:24,children:e.jsx("h1",{style:{fontSize:20,marginBottom:20},children:t.PANEL_TITLE})})}),e.jsxs(f,{gutter:8,children:[e.jsx(C,{className:"gutter-row",span:21,children:e.jsx(J,{config:t})}),e.jsx(C,{className:"gutter-row",span:3,children:e.jsx(d,{onClick:n,block:!0,icon:e.jsx(Q,{})})})]})]})}function ae({config:t,createForm:s,updateForm:a}){const n=y();return E.useLayoutEffect(()=>{n(x.resetState())},[]),e.jsxs(q,{config:t,fixHeaderPanel:e.jsx(se,{config:t}),sidePanelBottomContent:e.jsx(H,{config:t,formElements:s,withUpload:!0}),sidePanelTopContent:e.jsx(te,{config:t,formElements:a}),children:[e.jsx(Z,{config:t}),e.jsx(V,{config:t})]})}function Le(){const t=h(),s="admin",a={displayLabels:["name","surname"],searchFields:"email,name,surname",outputValue:"_id"},n=["email"],c=[{title:t("first name"),dataIndex:"name"},{title:t("last name"),dataIndex:"surname"},{title:t("Email"),dataIndex:"email"},{title:t("role"),dataIndex:"role"}],l=[{title:t("first name"),dataIndex:"name"},{title:t("last name"),dataIndex:"surname"},{title:t("Email"),dataIndex:"email"},{title:t("role"),dataIndex:"role"},{title:t("enabled"),dataIndex:"enabled",onCell:()=>({props:{style:{width:"60px"}}}),render:(m,p)=>e.jsx(X,{checked:m,checkedChildren:e.jsx(R,{}),unCheckedChildren:e.jsx(M,{})})}],o={PANEL_TITLE:t("admin"),DATATABLE_TITLE:t("admin_list"),ADD_NEW_ENTITY:t("add_new_admin"),ENTITY_NAME:t("admin"),RECORD_ENTITY:t("record_payment")},i={...{entity:s,...o},readColumns:c,dataTableColumns:l,searchConfig:a,deleteModalLabels:n};return e.jsx(ae,{createForm:e.jsx(w,{}),updateForm:e.jsx(w,{isUpdateForm:!0}),config:i})}export{Le as default};
